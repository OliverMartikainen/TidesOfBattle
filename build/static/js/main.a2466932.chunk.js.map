{"version":3,"sources":["services/tokenManager.js","resources/one_sword_lite.jpg","resources/one_tower_lite.jpg","resources/zero_lite.jpg","resources/zero_skull_lite.jpg","resources/two_lite.jpg","resources/three_lite.jpg","resources/backside_lite.jpg","components/TideCard.js","components/NativeSelector.js","utils/config.js","services/cards.js","services/users.js","components/TideCards.js","App.js","index.js"],"names":["TOKEN","TIDE_CARDS_DATA","zero","zero_skull","one_sword","one_tower","two","three","TideCard","card","username","handleSelect","cardName","cardOwner","cardIndex","img","backside","alt","style","backgroundColor","className","onDoubleClick","src","useStyles","makeStyles","theme","formControl","margin","spacing","minWidth","NativeSelector","value","valueOptions","label","handleChange","disabled","classes","options","map","v","labelLower","toLowerCase","htmlFor","FormControl","InputLabel","shrink","NativeSelect","onChange","event","target","inputProps","name","id","setToken","token","getAuthHeader","headers","Authorization","console","log","process","SERVICE_URL","config","select","a","authHeader","axios","post","res","data","error","cardsSSE","EventSource","forceEnd","get","status","nosword","initialLoad","selectedCards","ownCards","othersCards","swordOwner","login","usernames","stats","changeSwordUser","newSwordUser","addUser","CardSubHandler","setCardStates","cardSub","cardsService","onopen","onerror","close","setTimeout","onmessage","msgObj","JSON","parse","msg","cards","state","filter","c","waitingForSword","doneBy","sseMsgActions","SwordUserSelector","cardStates","isSwordOwner","usersService","usernameOptions","cardsArray","i","push","TideCards","logout","useState","defaultState","useEffect","forEach","initThing","handleCardSelect","ownCardsFiltered","length","cardInfo","handleSwordSkip","forceReset","cardComps","isSwordBtnEnabled","display","onClick","overflow","height","saveUser","localStorage","setItem","LoginScreen","setUsername","App","storedUser","getItem","Token","tokenManager","getDefaultUser","setUsernameOptions","fetchUsernames","clear","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gLAAIA,E,wFCAW,MAA0B,2CCA1B,MAA0B,2CCA1B,MAA0B,sCCA1B,MAA0B,4CCA1B,MAA0B,qCCA1B,MAA0B,uCCA1B,MAA0B,0C,OCQnCC,EAAkB,CACpB,KAAQC,EACR,WAAcC,EACd,UAAaC,EACb,UAAaC,EACb,IAAOC,EACP,MAASC,GAyBEC,EAtBE,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,SAAUC,EAAmB,EAAnBA,aACxBC,EAAmCH,EAAnCG,SAAUC,EAAyBJ,EAAzBI,UAAWC,EAAcL,EAAdK,UACvBC,EAAMd,EAAgBW,IAAaI,EACnCC,EAAML,GAAY,UAIlBM,EAAQ,CAAEC,gBAFFN,EAAcA,IAAcH,EAAY,MAAQ,OAAU,MAIxE,OACI,sBACIU,UAAU,gBACVF,MAAOA,EACPG,cAAe,kBAAMV,EAAaG,IAHtC,UAKI,qBAAKM,UAAU,WAAWE,IAAKP,EAAKE,IAAKA,IAL7C,cAMgBJ,M,gCC5BlBU,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,YAAa,CACTC,OAAQF,EAAMG,QAAQ,GACtBC,SAAU,SAmCHC,EA/BQ,SAAC,GAAoE,IAAlEC,EAAiE,EAAjEA,MAAOC,EAA0D,EAA1DA,aAAcC,EAA4C,EAA5CA,MAAOC,EAAqC,EAArCA,aAAqC,IAAvBC,gBAAuB,SACjFC,EAAUb,IAEVc,EAAUL,EAAaM,KAAI,SAAAC,GAAC,OAAI,wBAAgBR,MAAOQ,EAAvB,SAA2BA,GAAdA,MAE7CC,EAAaP,EAAMQ,cACnBC,EAAO,UAAMF,EAAN,6BAEb,OACI,8BACI,eAACG,EAAA,EAAD,CAAavB,UAAWgB,EAAQV,YAAhC,UACI,cAACkB,EAAA,EAAD,CAAYC,QAAM,EAACH,QAASA,EAA5B,SACKT,IAEL,eAACa,EAAA,EAAD,CACIX,SAAUA,EACVJ,MAAOA,EACPgB,SAAU,SAACC,GAAD,OAAWd,EAAac,EAAMC,OAAOlB,QAC/CmB,WAAY,CACRC,KAAMX,EACNY,GAAIV,GANZ,UASI,wBAAQX,MAAO,GAAf,kBACCM,W,iBTlCRgB,EAAW,SAACC,GACrBtD,EAAQsD,EAAK,iBAAaA,GAAU,MAG3BC,EAAgB,iBAAO,CAChCC,QAAS,CAAEC,cAAezD,KAGf,EAEXqD,EUVJK,QAAQC,IAAIC,aAAsBA,6BAOnB,MATD,QCKRC,EAAW,UADDC,EACC,UAOXC,EAAM,uCAAG,WAAOjD,GAAP,mBAAAkD,EAAA,sEAEDC,EAAaV,IAFZ,SAGWW,IAAMC,KAAN,UAAcN,EAAd,WAAoC,CAAE/C,aAAamD,GAH9D,cAGDG,EAHC,OAKD3D,EAAO2D,EAAIC,KALV,kBAOA5D,GAPA,uCASPiD,QAAQY,MAAR,MATO,kBAUA,MAVA,yDAAH,sDA4EG,GACXC,SAVa,WACb,IAEI,OADgB,IAAIC,YAAJ,UAAmBX,EAAnB,SAElB,MAAOS,GACLZ,QAAQY,MAAMA,KAMlBG,SA5DU,uCAAG,8BAAAT,EAAA,sEAEHC,EAAaV,IAFV,SAGSW,IAAMQ,IAAN,UAAab,EAAb,aAAqCI,GAH9C,cAGHG,EAHG,yBAIc,MAAfA,EAAIO,QAJH,uCAMTjB,QAAQY,MAAR,MANS,mBAOF,GAPE,yDAAH,qDA6DVM,QA/CS,uCAAG,8BAAAZ,EAAA,sEAEFC,EAAaV,IAFX,SAGUW,IAAMQ,IAAN,UAAab,EAAb,YAAoCI,GAH9C,cAGFG,EAHE,yBAIe,MAAfA,EAAIO,QAJJ,uCAMRjB,QAAQY,MAAR,MANQ,mBAOD,GAPC,yDAAH,qDAgDTP,SACAc,YAhCa,uCAAG,sCAAAb,EAAA,sEAENC,EAAaV,IAFP,SAGMW,IAAMQ,IAAN,UAAab,EAAb,gBAAwCI,GAH9C,cAGNG,EAHM,OAINC,EAAOD,EAAIC,KAJL,EAKsBA,EAAKS,cAA/BC,EALI,EAKJA,SAAUC,EALN,EAKMA,YALN,kBAML,CACHC,WAAYZ,EAAKY,WACjBF,SAAUA,EACVC,YAAaA,IATL,yCAaZtB,QAAQY,MAAR,MAbY,kBAcL,MAdK,0DAAH,sDCxDXT,EAAW,UADDC,EACC,UAwFF,GACXoB,MAlFO,uCAAG,WAAOxE,GAAP,mBAAAsD,EAAA,sEAEAC,EAAaV,IAFb,SAGYW,IAAMC,KAAN,UAAcN,EAAd,UAAmC,CAAEnD,SAAUA,GAAYuD,GAHvE,UAGAG,EAHA,OAKEd,EAAUc,EAAIC,KAAdf,MALF,uBAOFI,QAAQY,MAAMF,GAPZ,kBAQK,MARL,cAWNf,EAASC,GAXH,kBAYCA,GAZD,yCAcNI,QAAQY,MAAR,MAdM,kBAeC,MAfD,0DAAH,sDAmFPa,UA5DW,uCAAG,8BAAAnB,EAAA,sEAEJC,EAAaV,IAFT,SAGQW,IAAMQ,IAAN,UAAab,EAAb,cAAsCI,GAH9C,cAGJG,EAHI,yBAIHA,EAAIC,MAAQ,IAJT,uCAMVX,QAAQY,MAAR,MANU,kBAOH,CAAC,2CAPE,yDAAH,qDA6DXc,MA9CO,uCAAG,8BAAApB,EAAA,sEAEAC,EAAaV,IAFb,SAGYW,IAAMQ,IAAN,UAAab,EAAb,UAAkCI,GAH9C,cAGAG,EAHA,yBAICA,GAJD,uCAMNV,QAAQY,MAAR,MANM,iFAAH,qDA+CPe,gBA/BiB,uCAAG,WAAO3E,GAAP,iBAAAsD,EAAA,sEAEVC,EAAaV,IAFH,SAGEW,IAAMC,KAAN,UAAcN,EAAd,oBAA6C,CAAEyB,aAAc5E,GAAYuD,GAH3E,cAGVG,EAHU,yBAIO,MAAfA,EAAIO,QAJI,uCAMhBjB,QAAQY,MAAR,MANgB,mBAOT,GAPS,yDAAH,sDAgCjBiB,QAhBS,uCAAG,WAAO7E,GAAP,iBAAAsD,EAAA,sEAEFC,EAAaV,IAFX,SAGUW,IAAMC,KAAN,UAAcN,EAAd,QAAiC,CAAEnD,SAAUA,GAAYuD,GAHnE,cAGFG,EAHE,yBAIe,MAAfA,EAAIO,QAJJ,uCAMRjB,QAAQY,MAAR,MANQ,mBAOD,GAPC,yDAAH,uDCAPkB,EAAiB,SAAjBA,EAAkBC,GACpB,IAAMC,EAAUC,EAAapB,WAc7B,OAZAmB,EAAQE,OAAS,WACblC,QAAQC,IAAI,oBAEhB+B,EAAQG,QAAU,WACdnC,QAAQY,MAAM,kBACdoB,EAAQI,QACRC,YAAW,kBAAMP,EAAeC,KAAiB,MAErDC,EAAQM,UAAY,SAAChD,GACjBU,QAAQC,IAAI,YApFE,SAACU,EAAMoB,GACzB,IACI,IAAMQ,EAASC,KAAKC,MAAM9B,GAE1B,OAAQ4B,EAAOG,KACX,IAAK,MAeD,OAdAH,EAAOI,MACPZ,GAAc,SAAAa,GACV,IAAQD,EAAUJ,EAAVI,MACA3F,EAAa4F,EAAb5F,SACFsE,EAAcqB,EAAME,QAAO,SAAAC,GAAC,MAAoB,KAAhBA,EAAE3F,WAAoB2F,EAAE3F,YAAcH,KAC5E,OAAO,2BACA4F,GADP,IAEID,QACArB,cACAyB,gBAAiB,aAGzB/C,QAAQC,IAAI,aAIhB,IAAK,UAGD,YADAD,QAAQC,IAAIsC,EAAOvF,SAAU,WAGjC,IAAK,SAOD,YANA+E,GAAc,SAAAa,GACV,IAAQxF,EAAyBmF,EAAzBnF,UAAWD,EAAcoF,EAAdpF,UAEnB,OADAyF,EAAMD,MAAMvF,GAAWD,UAAYA,EAC5B,eAAKyF,MAIpB,IAAK,WAGD,YADA5C,QAAQC,IAAIsC,EAAOvF,SAAU,aAEjC,IAAK,iBAGD,YADAgD,QAAQC,IAAI,+BAAgCsC,EAAOd,WAEvD,IAAK,gBAQD,YANAM,GAAc,SAAAa,GACV,OAAO,2BACAA,GADP,IAEIG,gBAAiBR,EAAOvF,cAIpC,IAAK,eAQD,OAPAgD,QAAQC,IAAIsC,EAAOS,OAAQ,wBAAyBT,EAAOvF,eAC3D+E,GAAc,SAAAa,GACV,OAAO,2BACAA,GADP,IAEIrB,WAAYgB,EAAOvF,cAK/B,QACIgD,QAAQY,MAAM,oBAAqB2B,IAG7C,MAAO3B,GACLZ,QAAQY,MAAMA,EAAOD,IAkBrBsC,CAAc3D,EAAMqB,KAAMoB,IAEvBC,GAGLkB,EAAoB,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WACnBC,EAAeD,EAAW5B,aAAe4B,EAAWnG,SAEpDwB,EAAY,uCAAG,WAAOH,GAAP,eAAAiC,EAAA,0DACXtD,EAAWqB,KACD8E,EAAW5B,YAAe6B,EAFzB,iEAIXC,EAAa1B,gBAAgB3E,GAJlB,2CAAH,sDAOlB,OACI,cAAC,EAAD,CACIqB,MAAO8E,EAAW5B,WAClBjD,aAAc6E,EAAWG,gBACzB9E,aAAcA,EACdD,MAAO,aACPE,UAAW2E,KAKjBG,EAAa,WAEf,IADA,IAAIA,EAAa,GACRC,EAAI,EAAGA,EAAI,GAAIA,IACpBD,EAAWE,KAAK,CAAEvG,SAAU,GAAIC,UAAW,GAAIC,UAAWoG,IAE9D,OAAOD,GAoIIG,EAtHG,SAAC,GAA2C,IAAzC1G,EAAwC,EAAxCA,SAAUsG,EAA8B,EAA9BA,gBAAiBK,EAAa,EAAbA,OAC5C,EAAoCC,oBAAS,kBAZ5B,SAAC5G,EAAUsG,GAAX,MAAgC,CACjDX,MAAOY,IACPnC,cAAe,GACfC,SAAU,GACVC,YAAa,GACbyB,gBAAiB,GACjBxB,WAAY,GACZ+B,gBAAiBA,EACjBtG,SAAUA,GAIyC6G,CAAa7G,EAAUsG,MAA1E,mBAAOH,EAAP,KAAmBpB,EAAnB,KAEA+B,qBAAU,YACS,uCAAG,oCAAAxD,EAAA,sEACK2B,EAAad,cADlB,OACRR,EADQ,OAENY,EAAsCZ,EAAtCY,WAAYF,EAA0BV,EAA1BU,SAAUC,EAAgBX,EAAhBW,YACxBF,EAHQ,sBAGYC,GAHZ,YAGyBC,IAEvCS,GAAc,SAAAa,GACV,IAAMD,EAAQC,EAAMD,MAKpB,OAJAvB,EAAc2C,SAAQ,SAAAjB,GAClB,IAAQ3F,EAAyB2F,EAAzB3F,UAAWC,EAAc0F,EAAd1F,UACnBuF,EAAMvF,GAAWD,UAAYA,KAE1B,2BACAyF,GADP,IAEID,QACApB,aACAF,WACAC,mBAhBM,2CAAH,qDAoBf0C,GACA,IAAMhC,EAAUF,EAAeC,GAE/B,OAAO,kBAAMC,EAAQI,WACtB,IAEH,IAAM6B,EAAgB,uCAAG,WAAO7G,GAAP,+BAAAkD,EAAA,yDACbtD,EAAuDmG,EAAvDnG,SAAUuE,EAA6C4B,EAA7C5B,WAAYoB,EAAiCQ,EAAjCR,MAAOtB,EAA0B8B,EAA1B9B,SAAUC,EAAgB6B,EAAhB7B,YAGxB,KADVqB,EAAMvF,GACVD,UAJY,oDASfiE,EAAgBuB,EAAME,QAAO,SAAAC,GAAC,MAAoB,KAAhBA,EAAE3F,aACpC+G,EAAmB9C,EAAcyB,QAAO,SAAAC,GAAC,OAAIA,EAAE3F,YAAcH,KAItC,IAAzBoE,EAAc+C,QAA4C,IAA5BD,EAAiBC,OAd9B,oDAiBS,IAAzB/C,EAAc+C,QAA8C,IAA5BD,EAAiBC,QAAgB5C,IAAevE,EAjBhE,wDAoB0B,CAACqE,EAAS8C,OAAQ7C,EAAY6C,OAAQ/C,EAAc+C,QApB9E,qFAuBElC,EAAa5B,OAAOjD,GAvBtB,WAuBfgH,EAvBe,0DA0BrBrC,GAAc,SAAAa,GAEV,OADAA,EAAMvB,SAASoC,KAAKW,GACb,eACAxB,MA7BU,4CAAH,sDAkChByB,EAAe,uCAAG,sBAAA/D,EAAA,yDACfiB,IAAevE,EADA,iEAEdiF,EAAaf,UAFC,2CAAH,qDAKfoD,EAAU,uCAAG,sBAAAhE,EAAA,sEACT2B,EAAalB,WADJ,2CAAH,qDAIRQ,EAAsB4B,EAAtB5B,WACFgD,EADwBpB,EAAVR,MACI/D,KAAI,SAAC7B,GACzB,OAAO,cAAC,EAAD,CAA+BC,SAAUA,EAAUD,KAAMA,EAAME,aAAcgH,GAA9DlH,EAAKK,cAGzBgG,EAAgB7B,IAAevE,EAEjCwH,GAAoB,EACxB,GAAIpB,EAAc,CAGd,IAAMhC,EAAgB+B,EAAWR,MAAME,QAAO,SAAAC,GAAC,MAAoB,KAAhBA,EAAE3F,aAC/CkE,EAAWD,EAAcyB,QAAO,SAAAC,GAAC,OAAIA,EAAE3F,YAAcH,KAC9B,IAAzBoE,EAAc+C,QAAoC,IAApB9C,EAAS8C,SACvCK,GAAoB,GAI5B,OACI,gCACI,sBAAKhH,MAAO,CAAEiH,QAAS,QAAvB,UACI,yBAAQC,QAAS,kBAAMf,KAAvB,sBAA4C3G,KAC5C,cAAC,EAAD,CAAmBmG,WAAYA,OAEnC,sBAAK3F,MAAO,CAAEiH,QAAS,QAAvB,UACI,qBAAKjH,MAAO,CAAEiH,QAAS,OAAQE,SAAU,QAAzC,SACKJ,IAEJnB,GACG,wBAAQ3E,UAAW+F,EAAmBE,QAASL,EAA/C,4BAGJ,qBAAK7G,MAAO,CAAEoH,OAAQ,MACrBxB,GACG,wBAAQsB,QAASJ,EAAjB,yCAGJ,+BClPVO,G,MAAW,SAAC7H,EAAU4C,GACxBkF,aAAaC,QAAQ,WAAY/H,GACjC8H,aAAaC,QAAQ,QAASnF,KAc5BoF,EAAc,SAAC,GAAgD,IAA9ChI,EAA6C,EAA7CA,SAAUiI,EAAmC,EAAnCA,YAAa3B,EAAsB,EAAtBA,gBACpC9E,EAAY,uCAAG,WAAOH,GAAP,iBAAAiC,EAAA,0DACXtD,EAAWqB,IACa,SAAbrB,EAFA,iEAIGqG,EAAa7B,MAAMxE,GAJtB,UAIX4C,EAJW,8BAMbI,QAAQC,IAAI,gBANC,0BAUjB4E,EAAS7H,EAAU4C,GACnBqF,EAAYjI,GAXK,4CAAH,sDAclB,OACI,cAAC,EAAD,CACIqB,MAAOrB,EACPsB,aAAcgF,EACd9E,aAAcA,EACdD,MAAO,cAyCJ2G,EApCH,WACR,MAAgCtB,oBAAS,kBAtCtB,WACnB,IAAMuB,EAAaL,aAAaM,QAAQ,YAClCC,EAAQP,aAAaM,QAAQ,SAEnC,OAAKD,GAAeE,GAEpBC,EAAsBD,GACfF,GAH2B,GAkCaI,MAA/C,mBAAOvI,EAAP,KAAiBiI,EAAjB,KACA,EAA8CrB,mBAAS,IAAvD,mBAAON,EAAP,KAAwBkC,EAAxB,KAUA,GARA1B,qBAAU,YACc,uCAAG,4BAAAxD,EAAA,sEACK+C,EAAa5B,YADlB,OACbA,EADa,OAEnB+D,EAAmB/D,GAFA,2CAAH,qDAIpBgE,KACD,KAEEzI,EACD,OACI,qBAAKU,UAAU,MAAf,SACI,cAAC,EAAD,CAAaV,SAAUA,EAAUiI,YAAaA,EAAa3B,gBAAiBA,MAUxF,OACI,qBAAK5F,UAAU,MAAf,SACK4F,EAAgBa,OAAS,EACtB,cAAC,EAAD,CAAWR,OARR,WACXmB,aAAaY,QACbT,EAAY,KAMuBjI,SAAUA,EAAUsG,gBAAiBA,IAEhE,gBC1EhBqC,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MAEJC,SAASC,eAAe,W","file":"static/js/main.a2466932.chunk.js","sourcesContent":["let TOKEN\r\n\r\nexport const setToken = (token) => {\r\n    TOKEN = token ? `bearer ${token}` : null\r\n}\r\n\r\nexport const getAuthHeader = () => ({\r\n    headers: { Authorization: TOKEN }\r\n})\r\n\r\nexport default {\r\n    getAuthHeader,\r\n    setToken\r\n}","export default __webpack_public_path__ + \"static/media/one_sword_lite.4871870e.jpg\";","export default __webpack_public_path__ + \"static/media/one_tower_lite.5422d4d2.jpg\";","export default __webpack_public_path__ + \"static/media/zero_lite.09307b16.jpg\";","export default __webpack_public_path__ + \"static/media/zero_skull_lite.3d9aee36.jpg\";","export default __webpack_public_path__ + \"static/media/two_lite.e588a68b.jpg\";","export default __webpack_public_path__ + \"static/media/three_lite.0750c14f.jpg\";","export default __webpack_public_path__ + \"static/media/backside_lite.24c30a04.jpg\";","import one_sword from 'resources/one_sword_lite.jpg'\r\nimport one_tower from 'resources/one_tower_lite.jpg'\r\nimport zero from 'resources/zero_lite.jpg'\r\nimport zero_skull from 'resources/zero_skull_lite.jpg'\r\nimport two from 'resources/two_lite.jpg'\r\nimport three from 'resources/three_lite.jpg'\r\nimport backside from 'resources/backside_lite.jpg'\r\n\r\nconst TIDE_CARDS_DATA = {\r\n    'zero': zero,\r\n    'zero_skull': zero_skull,\r\n    'one_sword': one_sword,\r\n    'one_tower': one_tower,\r\n    'two': two,\r\n    'three': three\r\n}\r\n\r\nconst TideCard = ({ card, username, handleSelect }) => {\r\n    const { cardName, cardOwner, cardIndex } = card\r\n    const img = TIDE_CARDS_DATA[cardName] || backside\r\n    const alt = cardName || 'unknown'\r\n\r\n    const color = cardOwner ? ((cardOwner === username) ? 'red' : 'cyan') : null\r\n\r\n    const style = { backgroundColor: color } \r\n\r\n    return (\r\n        <div\r\n            className='tidecard-wrap'\r\n            style={style}\r\n            onDoubleClick={() => handleSelect(cardIndex)}\r\n        >\r\n            <img className='tidecard' src={img} alt={alt} />\r\n            CardOwner: {cardOwner}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default TideCard","import { makeStyles } from '@material-ui/core/styles'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport NativeSelect from '@material-ui/core/NativeSelect'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n    }\r\n}))\r\n\r\nconst NativeSelector = ({ value, valueOptions, label, handleChange, disabled = false }) => {\r\n    const classes = useStyles()\r\n\r\n    const options = valueOptions.map(v => <option key={v} value={v}>{v}</option>)\r\n\r\n    const labelLower = label.toLowerCase()\r\n    const htmlFor = `${labelLower}-native-label-placeholder`\r\n\r\n    return (\r\n        <div>\r\n            <FormControl className={classes.formControl}>\r\n                <InputLabel shrink htmlFor={htmlFor}>\r\n                    {label}\r\n                </InputLabel>\r\n                <NativeSelect\r\n                    disabled={disabled}\r\n                    value={value}\r\n                    onChange={(event) => handleChange(event.target.value)}\r\n                    inputProps={{\r\n                        name: labelLower,\r\n                        id: htmlFor,\r\n                    }}\r\n                >\r\n                    <option value={''}>None</option>\r\n                    {options}\r\n                </NativeSelect>\r\n            </FormControl>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NativeSelector","let baseUrl = './api'\r\n\r\nconsole.log(process.env.NODE_ENV, process.env.REACT_APP_BACKEND_URL)\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n    baseUrl = process.env.REACT_APP_BACKEND_URL || baseUrl\r\n}\r\n\r\n\r\nexport default { baseUrl }","import axios from 'axios'\r\nimport { getAuthHeader } from './tokenManager'\r\nimport config from 'utils/config'\r\n\r\nconst baseUrl = config.baseUrl\r\nconst SERVICE_URL = `${baseUrl}/cards`\r\n\r\n/**\r\n * \r\n * @param {Number} cardIndex \r\n * @returns {Promise<Object | null>}\r\n */\r\nconst select = async (cardIndex) => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.post(`${SERVICE_URL}/select`, { cardIndex }, authHeader)\r\n\r\n        const card = res.data\r\n\r\n        return card\r\n    } catch (error) {\r\n        console.error(error)\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Promise<Boolean>}\r\n */\r\nconst forceEnd = async () => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.get(`${SERVICE_URL}/forceEnd`, authHeader)\r\n        return (res.status === 204)\r\n    } catch (error) {\r\n        console.error(error)\r\n        return false\r\n    }\r\n}\r\n\r\n/**\r\n * @returns {Promise<Boolean>}\r\n */\r\nconst nosword = async () => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.get(`${SERVICE_URL}/nosword`, authHeader)\r\n        return (res.status === 204)\r\n    } catch (error) {\r\n        console.error(error)\r\n        return false\r\n    }\r\n}\r\n\r\n//card --> { cardIndex: Number, cardOwner: String, cardName: String }\r\n\r\n/**\r\n * \r\n * @returns {Promise<{ swordOwner: String, ownCards: Array, othersCards: Array } | null >}\r\n */\r\nconst initialLoad = async () => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.get(`${SERVICE_URL}/initialLoad`, authHeader)\r\n        const data = res.data\r\n        const { ownCards, othersCards } = data.selectedCards\r\n        return {\r\n            swordOwner: data.swordOwner,\r\n            ownCards: ownCards,\r\n            othersCards: othersCards\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error)\r\n        return null\r\n    }\r\n}\r\n\r\nconst cardsSSE = () => {\r\n    try {\r\n        const cardSub = new EventSource(`${SERVICE_URL}/sse`)\r\n        return cardSub\r\n    } catch (error) {\r\n        console.error(error)\r\n    }\r\n}\r\n\r\nexport default {\r\n    cardsSSE,\r\n    forceEnd,\r\n    nosword,\r\n    select,\r\n    initialLoad\r\n}","import axios from 'axios'\r\nimport { getAuthHeader, setToken } from './tokenManager'\r\nimport config from 'utils/config'\r\n\r\nconst baseUrl = config.baseUrl\r\nconst SERVICE_URL = `${baseUrl}/users`\r\n\r\n/**\r\n * \r\n * @param {String} username \r\n * @returns {Promise<String | null>}\r\n */\r\nconst login = async (username) => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.post(`${SERVICE_URL}/login`, { username: username }, authHeader)\r\n\r\n        const { token } = res.data\r\n        if (!token) {\r\n            console.error(res)\r\n            return null\r\n        }\r\n        \r\n        setToken(token)\r\n        return token\r\n    } catch (error) {\r\n        console.error(error)\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Promise<Array<String>>} usernames array\r\n */\r\nconst usernames = async () => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.get(`${SERVICE_URL}/usernames`, authHeader)\r\n        return res.data || []\r\n    } catch (error) {\r\n        console.error(error)\r\n        return ['FAILED TO GET USERNAMES - REFRESH PAGE']\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Promise<Object>} just <div><pre> object --> this. \r\n */\r\nconst stats = async () => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.get(`${SERVICE_URL}/stats`, authHeader)\r\n        return res\r\n    } catch (error) {\r\n        console.error(error)\r\n        return error\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {String} username newSword user username \r\n * @returns {Promise<Boolean>}\r\n */\r\nconst changeSwordUser = async (username) => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.post(`${SERVICE_URL}/changeSwordUser`, { newSwordUser: username }, authHeader)\r\n        return (res.status === 204)\r\n    } catch (error) {\r\n        console.error(error)\r\n        return false\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {String} username \r\n * @returns {Promise<Boolean>}\r\n */\r\nconst addUser = async (username) => {\r\n    try {\r\n        const authHeader = getAuthHeader()\r\n        const res = await axios.post(`${SERVICE_URL}/add`, { username: username }, authHeader)\r\n        return (res.status === 204)\r\n    } catch (error) {\r\n        console.error(error)\r\n        return false\r\n    }\r\n}\r\n\r\nexport default {\r\n    login,\r\n    usernames,\r\n    stats,\r\n    changeSwordUser,\r\n    addUser\r\n}","import { useEffect, useState } from 'react'\r\nimport TideCard from './TideCard'\r\nimport NativeSelector from './NativeSelector'\r\nimport cardsService from 'services/cards'\r\nimport usersService from 'services/users'\r\n\r\n// --> improve game end/ new session start \r\n//--> store end result in other property, \r\n//show all that until state 'isFrozen' is reset with click? --> ownCards are null anyway\r\n\r\nconst sseMsgActions = (data, setCardStates) => {\r\n    try {\r\n        const msgObj = JSON.parse(data)\r\n\r\n        switch (msgObj.msg) {\r\n            case 'end':\r\n                msgObj.cards\r\n                setCardStates(state => {\r\n                    const { cards } = msgObj\r\n                    const { username } = state\r\n                    const othersCards = cards.filter(c => c.cardOwner !== '' && c.cardOwner !== username)\r\n                    return {\r\n                        ...state,\r\n                        cards,\r\n                        othersCards,\r\n                        waitingForSword: ''\r\n                    }\r\n                })\r\n                console.log('ROUND END')\r\n                //--> set all cards this --> set ownCards & othersCards\r\n                return\r\n\r\n            case 'nosword':\r\n                //just nice to know i guesS? --> should trigger 'end' action\r\n                console.log(msgObj.username, 'NOSWORD')\r\n                return\r\n\r\n            case 'select':\r\n                setCardStates(state => {\r\n                    const { cardIndex, cardOwner } = msgObj\r\n                    state.cards[cardIndex].cardOwner = cardOwner\r\n                    return { ...state }\r\n                })\r\n                //use this to fill the cards array --> ownCards & othersCards to display on bottom side seperate\r\n                return\r\n            case 'forceEnd':\r\n                //just nice to know\r\n                console.log(msgObj.username, 'FORCE END')\r\n                return\r\n            case 'too-many-users':\r\n                //nice to know --> could pop out alert if wanted to\r\n                console.log('TOO MANY USER SELECTED CARDS', msgObj.usernames)\r\n                return\r\n            case 'waiting-sword':\r\n                //display sword button to this player \r\n                setCardStates(state => {\r\n                    return {\r\n                        ...state,\r\n                        waitingForSword: msgObj.username\r\n                    }\r\n                })\r\n                return\r\n            case 'sword-change':\r\n                console.log(msgObj.doneBy, 'SWORD USER CHANGED TO', msgObj.username)\r\n                setCardStates(state => {\r\n                    return {\r\n                        ...state,\r\n                        swordOwner: msgObj.username\r\n                    }\r\n                })\r\n                return\r\n\r\n            default:\r\n                console.error('UNDEFINED SSE MSG', msgObj)\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error, data)\r\n    }\r\n}\r\n\r\n\r\nconst CardSubHandler = (setCardStates) => {\r\n    const cardSub = cardsService.cardsSSE()\r\n\r\n    cardSub.onopen = () => {\r\n        console.log('CARD SUB ACTIVE')\r\n    }\r\n    cardSub.onerror = () => {\r\n        console.error('CARD SUB ERROR')\r\n        cardSub.close()\r\n        setTimeout(() => CardSubHandler(setCardStates), (10 * 1000))\r\n    }\r\n    cardSub.onmessage = (event) => {\r\n        console.log('CSUB MSG')\r\n        sseMsgActions(event.data, setCardStates)\r\n    }\r\n    return cardSub\r\n}\r\n\r\nconst SwordUserSelector = ({ cardStates }) => {\r\n    const isSwordOwner = cardStates.swordOwner === cardStates.username\r\n\r\n    const handleChange = async (value) => {\r\n        const username = value\r\n        if(username === cardStates.swordOwner || !isSwordOwner) return\r\n\r\n        await usersService.changeSwordUser(username)\r\n    }\r\n\r\n    return (\r\n        <NativeSelector\r\n            value={cardStates.swordOwner}\r\n            valueOptions={cardStates.usernameOptions}\r\n            handleChange={handleChange}\r\n            label={'SwordOwner'}\r\n            disabled={!isSwordOwner}\r\n        />\r\n    )\r\n}\r\n\r\nconst cardsArray = () => {\r\n    let cardsArray = []\r\n    for (let i = 0; i < 24; i++) {\r\n        cardsArray.push({ cardName: '', cardOwner: '', cardIndex: i })\r\n    }\r\n    return cardsArray\r\n}\r\n\r\nconst defaultState = (username, usernameOptions) => ({\r\n    cards: cardsArray(),\r\n    selectedCards: [],\r\n    ownCards: [],\r\n    othersCards: [],\r\n    waitingForSword: '', //username who's sword we are waiting\r\n    swordOwner: '',\r\n    usernameOptions: usernameOptions,\r\n    username: username\r\n})\r\n\r\nconst TideCards = ({ username, usernameOptions, logout }) => {\r\n    const [cardStates, setCardStates] = useState(() => defaultState(username, usernameOptions))\r\n\r\n    useEffect(() => {\r\n        const initThing = async () => {\r\n            const data = await cardsService.initialLoad()\r\n            const { swordOwner, ownCards, othersCards } = data\r\n            const selectedCards = [...ownCards, ...othersCards]\r\n\r\n            setCardStates(state => {\r\n                const cards = state.cards\r\n                selectedCards.forEach(c => {\r\n                    const { cardOwner, cardIndex } = c\r\n                    cards[cardIndex].cardOwner = cardOwner\r\n                })\r\n                return {\r\n                    ...state,\r\n                    cards,\r\n                    swordOwner,\r\n                    ownCards,\r\n                    othersCards\r\n                }\r\n            })\r\n        }\r\n        initThing()\r\n        const cardSub = CardSubHandler(setCardStates)\r\n\r\n        return () => cardSub.close()\r\n    }, [])\r\n\r\n    const handleCardSelect = async (cardIndex) => {\r\n        const { username, swordOwner, cards, ownCards, othersCards } = cardStates\r\n\r\n        const card = cards[cardIndex]\r\n        if (card.cardOwner !== '') return //should prevent selecting alreadt selected card --> check done in backend too\r\n\r\n        //the rest of the picks are not preventend in backend atm.\r\n\r\n        //check if non swordowner tries to pick a 2nd\r\n        const selectedCards = cards.filter(c => c.cardOwner !== '')\r\n        const ownCardsFiltered = selectedCards.filter(c => c.cardOwner === username)\r\n        //0 selected --> no checks\r\n\r\n        //1 selected --> prevent if its yours\r\n        if (selectedCards.length === 1 && ownCardsFiltered.length === 1) return\r\n\r\n        //2 selected --> prevent from picking unless you are one of the 2 and have sword\r\n        if ((selectedCards.length === 2) && (ownCardsFiltered.length !== 1 || swordOwner !== username)) return\r\n\r\n        //check if round ended & u start clicking --> ownCount & othersCount would be different\r\n        const [ownCount, othersCount, selectedCount] = [ownCards.length, othersCards.length, selectedCards.length]\r\n        if (ownCount + othersCount !== selectedCount) return\r\n\r\n        const cardInfo = await cardsService.select(cardIndex)\r\n        if (!cardInfo) return //should mean card is already selected by someone\r\n\r\n        setCardStates(state => {\r\n            state.ownCards.push(cardInfo)\r\n            return {\r\n                ...state\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleSwordSkip = async () => {\r\n        if ((swordOwner !== username)) return\r\n        await cardsService.nosword()\r\n    }\r\n\r\n    const forceReset = async () => {\r\n        await cardsService.forceEnd()\r\n    }\r\n\r\n    const { swordOwner, cards } = cardStates\r\n    const cardComps = cards.map((card) => {\r\n        return <TideCard key={card.cardIndex} username={username} card={card} handleSelect={handleCardSelect} />\r\n    })\r\n\r\n    const isSwordOwner = (swordOwner === username)\r\n\r\n    let isSwordBtnEnabled = false\r\n    if (isSwordOwner) {\r\n        //check if 2 cards are selected and 1 is yours \r\n        //--> waiting for you to decide if you use the sword or not\r\n        const selectedCards = cardStates.cards.filter(c => c.cardOwner !== '')\r\n        const ownCards = selectedCards.filter(c => c.cardOwner === username)\r\n        if (selectedCards.length === 2 && ownCards.length === 1) {\r\n            isSwordBtnEnabled = true\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ display: 'flex' }}>\r\n                <button onClick={() => logout()} >Logout - {username}</button>\r\n                <SwordUserSelector cardStates={cardStates} />\r\n            </div>\r\n            <div style={{ display: 'grid' }}>\r\n                <div style={{ display: 'flex', overflow: 'auto' }}>\r\n                    {cardComps}\r\n                </div>\r\n                {isSwordOwner &&\r\n                    <button disabled={!isSwordBtnEnabled} onClick={handleSwordSkip}>\r\n                        DONT USE SWORD\r\n                    </button>}\r\n                <div style={{ height: 55 }}></div>\r\n                {isSwordOwner &&\r\n                    <button onClick={forceReset}>\r\n                        FORCE RESET - FOR BUGS ONLY\r\n                    </button>}\r\n                <div></div>\r\n            </div >\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default TideCards","import { useState, useEffect } from 'react'\r\nimport TideCards from 'components/TideCards'\r\nimport NativeSelector from 'components/NativeSelector'\r\nimport usersService from 'services/users'\r\nimport './App.css'\r\n\r\nimport tokenManager from 'services/tokenManager'\r\n\r\nconst saveUser = (username, token) => {\r\n    localStorage.setItem('Username', username)\r\n    localStorage.setItem('Token', token)\r\n}\r\nconst getDefaultUser = () => {\r\n    const storedUser = localStorage.getItem('Username')\r\n    const Token = localStorage.getItem('Token')\r\n\r\n    if (!storedUser || !Token) return ''\r\n\r\n    tokenManager.setToken(Token)\r\n    return storedUser\r\n}\r\n\r\n\r\n\r\nconst LoginScreen = ({ username, setUsername, usernameOptions }) => {\r\n    const handleChange = async (value) => {\r\n        const username = value\r\n        if (!username || username === 'None') return\r\n\r\n        const token = await usersService.login(username)\r\n        if (!token) {\r\n            console.log('login failed')\r\n            return\r\n        }\r\n\r\n        saveUser(username, token) //update localStorage\r\n        setUsername(username) //update state\r\n    }\r\n\r\n    return (\r\n        <NativeSelector\r\n            value={username}\r\n            valueOptions={usernameOptions}\r\n            handleChange={handleChange}\r\n            label={'Username'}\r\n        />\r\n    )\r\n}\r\n\r\nconst App = () => {\r\n    const [username, setUsername] = useState(() => getDefaultUser())\r\n    const [usernameOptions, setUsernameOptions] = useState([])\r\n\r\n    useEffect(() => {\r\n        const fetchUsernames = async () => {\r\n            const usernames = await usersService.usernames()\r\n            setUsernameOptions(usernames)\r\n        }\r\n        fetchUsernames()\r\n    }, [])\r\n\r\n    if (!username) {\r\n        return (\r\n            <div className='App'>\r\n                <LoginScreen username={username} setUsername={setUsername} usernameOptions={usernameOptions} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const logout = () => {\r\n        localStorage.clear()\r\n        setUsername('')\r\n    }\r\n\r\n    return (\r\n        <div className='App'>\r\n            {usernameOptions.length > 0 ? //wait till username options are fetched\r\n                <TideCards logout={logout} username={username} usernameOptions={usernameOptions} />\r\n                :\r\n                'Loading...'\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}